<meta charset="UTF-8">
<link rel="stylesheet" type="text/css" href="../styles/p_user_list.css">
<link rel="stylesheet" type="text/css" href="../styles/p_insitution_list.css">

<div class="container-fluid">
    <h2 class="title">文章管理</h2>
      <form class="form-inline" id="QueryArticleForm">
          <a href="#" class="btn btn-primary btn-color" id="articleAdd" data-toggle="modal" data-target="#myModal">添加文章</a>
            <div class="form-group">
                  <label for="articleName">标题</label> <input type="text"
                        class="form-control" name="articleName" id="articleName">
            </div>
            <a class="btn btn-default bt-color btn-sm" role="button" id="queryArticleList">
                <span  class="gicon">搜索</span>
          </a>
      </form>
      <div id="article_list"></div>
          <nav>
    <div class="pagin-btm clearFix innerWord">
        <div class="pagin" id="page"></div>
    </div>
    </nav>
     
      <nav>
        <div class="pagination pull-right radiusIcon" style="margin:10px 0px;" id="page">
        </div>
    </nav>

    <!-- 编辑和添加文章的modal -->
    <div class="modal fade" data-backdrop  id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
      <div class="modal-dialog" role="document" style="min-width:800px;" >
        <div class="modal-content">
          <div class="modal-header"><!-- 
            <button type="button" class="close" data-dismiss="modal"
              aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button> -->
            <h4 class="modal-title text-center" id="myModalLabel">文章</h4>
          </div>
          <div class="modal-body"> 
            <div class="container-fluid">
              <form class="form-horizontal" id="articleFormBean">
                <div class="form-group">
                  <label class="col-sm-2 control-label">标题</label>
                  <div class="col-sm-10">
                    <input type="text" class="form-control" name="title" required="required" maxLength="40">
                      <span class="hide" style="color:red;" id="titleBox"></span>
                  </div>
                </div>

              <div class="form-group">
                  <label class="col-sm-2 control-label">作者</label>
                  <div class="col-sm-10">
                      <div class="col-sm-4" style="padding-left:0">
                          <input type="text" class="form-control text-center" name="author"  placeholder="作者" id="J_author" maxLength="10">
                          <span class="hide" style="color:red;" id="priorityBox"></span>
                      </div>
                  </div>
              </div>

                <div class="form-group">
                  <label class="col-sm-2 control-label">优先级</label>
                  <div class="col-sm-10">
                    <div class="col-sm-4" style="padding-left:0">
                      <input type="text" name="priority" class="form-control" required="required" value="50" range="[1,999]" placeholder="1～999 数字越小 排序越前" >
                      <span class="hide" style="color:red;" id="priorityBox"></span>
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-2 control-label">简介</label>
                  <div class="col-sm-10">
                    <input type="text" class="form-control text-center" name="profile"
                      required="required" placeholder="一句简短的话，显示到轮播低栏" maxLength="50">
                      <span class="hide" style="color:red;" id="profileBox"></span>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-2 control-label">类型</label>
                  <div class="col-sm-10">
                      <select class="form-control" name="type" id="J_type">
                          <option value="1">文章</option>
                          <option value="2">机构</option>
                          <option value="3">第三方页面</option>
                      </select>
                      <input type="hidden" name="state" value="0"> <input
                      type="hidden" name="createTime" value="0">
                  </div>
                </div>
                <div class="form-group" id="J_organBox">
                  <label  class="col-sm-2 control-label">机构</label>
                  <div class="col-sm-10">
                      <select class="form-control" name="organizationId" id="J_orgId">
                      </select>
                      <span class="hide" style="color:red;" id="organizationIdBox"></span>
                  </div>
                </div>
                <div class="form-group" id="J_urlBox">
                  <label class="col-sm-2 control-label">URL</label>
                  <div class="col-sm-10">
                    <input type="text" class="form-control text-center" name="url"  placeholder="支持第三方页面">
                      <span class="hide" style="color:red;" id="urlBox"></span>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-2 control-label">作为Banner</label>
                  <div class="col-sm-10">
                    <select class="form-control" name="isBanner" id="J_isBanner" style="width:60px">
                        <option value="1">是</option>
                        <option value="0">否</option>
                    </select>
                  </div>
                </div>

                <!-- 文章关联图片列表 -->
                  <div class="form-group">
                      <label class="col-sm-2 control-label">文章主图</label>
                      <div class="col-sm-10">
                        <div style="width:100px;height: 100px;border:1px solid #ddd;">
                            <img id="J_uploadImg" style="width: 100%;height: 100%"/>
                              <input type="hidden" id="J_imgResource">
                              <span id="upload-file-message"></span>
                          </div>
                      <span class="btn btn-default fileinput-button">
                        <span>上传图片</span>
                            <input id="J_uploadMainPic" type="file" accept="image/jpg,image/png,image/gif, image/jpeg"  name="file">
                        </span>
                          <span class="hide" style="color:red;" id="usernameBox"></span>
                      </div>
                  </div>

                <div class="form-group">
                  <label class="col-sm-2 control-label">文章详情</label>
                  <div class="col-sm-10">
                    <input id="image-uploader" name="file" accept="image/jpg,image/png,image/gif, image/jpeg" type="file" style="display:none">
                    <textarea style="width:100%" rows="4" name="detail" maxLength="8000"></textarea>
                      <span class="hide" style="color:red;" id="detailBox"></span>
                  </div>
                </div>
              </form>
            </div>
          </div>
          <div class="modal-footer" style="text-align: center">
            <button type="button" class="btn btn-default" id="closeUserForm" data-dismiss="modal">取消</button>
            <button type="button" class="btn btn-info" id="saveArticleBtn" >保存</button>
          </div>
        </div>
      </div>
    </div>

    <!-- templates -->
  <script id="t:v_empty_list" type="text/html">
    <div class="codeContent field min-height" id="project-interface">
      <div class="cooperate-status">
        <p>当前列表没有数据！</p>
      </div>
    </div>
  </script>
    <script id="t:option_list" type="text/html">
        <option value="">----请选择----</option>
        {{each list as o}}
        <option value="{{o.id}}">{{o.name}}</option>
        {{/each}}
    </script>

    <script id="t:article_list" type="text/html">
        <table class="table table-striped table-bordered" style="margin-bottom: 0px">
            <tbody>
            <tr>
                <td>编号</td>
                <td>标题</td>
                <td>类型</td>
                <td>是否作为Banner文章</td>
                <td>创建时间</td>
                <td width="70">排序</td>
                <td width="100">操作</td>
            </tr>
            {{each list as l}}
            <tr>
                <td>{{l.id}}</td>
                <td>{{l.title}}</td>
                <td>
                    {{if l.type==1}}文章{{/if}}
                    {{if l.type==2}}机构{{/if}}
                    {{if l.type==3}}第三方页面{{/if}}
                </td>
                <!--<td> {{if l.status==0}}已禁止-->
                    <!--{{else}}已开通{{/if}}-->
                <!--</td>-->
                <td> {{if l.isBanner==1}}是
                    {{else}}否{{/if}}
                </td>
                <td>{{l.createTimeStr}}</td>
                <td>{{l.priority}}</td>
                <td>
                    <a href="#" class="J_edit" data-id="{{l.id}}" data-title="{{l.title}}"
                       data-priority="{{l.priority}}" data-author="{{l.author}}"
                       data-type="{{l.type}}"
                       data-organizationId="{{l.organizationId}}" data-url="{{l.url}}"
                       data-detail="{{l.detail}}"
                       data-toggle="modal" data-target="#myModal">编辑</a>&nbsp;
                    {{if l.status==0}}
                    <a href="#" class="J_update" data-id="{{l.id}}" data-status="1">开通</a>
                    {{else}}
                    <a href="#" class="J_update" data-id="{{l.id}}" data-status="0">禁用</a>
                    {{/if}}
                </td>
            </tr>
            {{/each}}
            </tbody>
        </table>
    </script>
    <script type="text/javascript" src='../plugins/tinymce/tinymce.min.js'></script>
    <script type="text/javascript" src="../modules/dateFormat/dateFormat.js"></script>
    <script type="text/javascript" src="../scripts/p_article_list.js"></script>
</div>
